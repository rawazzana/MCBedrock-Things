{
	"namespace": "spmax_customnpcs_common",

	"student_button@common_buttons.light_text_button": {
		"$button_type_panel": "npc_interact.student_button_label_panel",
		"$pressed_button_name": "button.student_button",
		"bindings": [
			{
				"binding_type": "collection_details",
				"binding_collection_name": "student_buttons_collection",
				"binding_collection_prefix": "student_buttons"
			},
			{
				"binding_name": "#student_button_visible",
				"binding_type": "collection",
				"binding_name_override": "#visible",
				"binding_collection_name": "student_buttons_collection"
			}
		]
	},

	"text_section_toggle_button_base@common_toggles.light_text_toggle": {
		"size": [ "100%", "30px" ],
		"$radio_toggle_group": true,
		"$toggle_name|default": "navigation_tab",
		"$default_selector_toggle_index|default": 0,
		"$toggle_group_default_selected": "$default_selector_toggle_index",
		"$toggle_tab_focus_binding_type": "global",
		"$toggle_tab_focus_binding_name": "#navigation_tab_focus_precedence",
		"$toggle_on_hover_binding_type": "global",
		"$toggle_on_hover_binding_name": "#toggle_on_hover",
		"$toggle_tts_toggle_on_text": "accessibility.state.selected",
		"$toggle_tts_toggle_off_text": "accessibility.state.unselected",
		"$toggle_tts_name": "accessibility.tab.tts.title"
	},

	"close_button_holder": {
		"type": "panel",
		"size": [ "100%c", "100%c" ],
		"anchor_from": "top_right",
		"anchor_to": "bottom_right",
		"offset": [ 8, -3 ],
		"controls": [
			{
				"close_basic@npc_interact.x_close_button": {
					"$close_button_to_button_id": "button.exit_basic",
          			"$visibility_binding_name": "#basic_visible"
				}
			},
			{
				"close_advanced@npc_interact.x_close_button": {
					"$close_button_to_button_id": "button.exit_basic",
          			"$visibility_binding_name": "#advanced_visible"
				}
			},
			{
				"close_student_edit@npc_interact.ignorable_x_close_button": {
					"ignored": "(not $is_worldbuilder)",
					"$close_button_to_button_id": "button.exit_student_edit",
					"$visibility_binding_name": "#student_view_visible"
        		}
			},
			{
				"close_student@npc_interact.ignorable_x_close_button": {
					"ignored": "$is_worldbuilder",
					"$close_button_to_button_id": "button.exit_student",
					"$visibility_binding_name": "#student_view_visible"
    		    }
			},
			{
				"close_maximized_action_edit@npc_interact.close_button_base": {
					"$close_button_to_button_id": "button.exit_maximized",
					"$default_texture": "textures/ui/minimize",
					"$hover_texture": "textures/ui/minimizeHover",
					"$pressed_texture": "textures/ui/minimizePress",
					"$visibility_binding_name": "#maximized_edit_visible"
        		}
			}
		]
	},

	"fullscreen_top_header@common.fullscreen_header": {
		"$back_button_has_title": "($back_button_text > '')",
		"$button_text": "$back_button_text",
		"layer": 9,
		"variables": [
			{
				"requires": "$is_worldbuilder",
				"$back_button_pressed_button_name": "button.exit_student_edit"
			},
			{
				"requires": "(not $is_worldbuilder)",
				"$back_button_pressed_button_name": "button.exit_student"
			}
		]
	},

	"fullscreen_divider_screen": {
		"type": "panel",
		"$back_button_text|default": "gui.back",
		"$transparent_background|default": false,
		"$show_divider|default": true,
	    "controls": [
			{ "top_header@spmax_customnpcs_common.fullscreen_top_header": {} },
			{
				"background_fill_image": {
					"type": "image",
					"ignored": "$transparent_background",
					"texture": "textures/ui/White",
					"color": "$sidebar_bg_color",
					"keep_ratio": false,
					"layer": -1
				}
			},
      		{
				"selector_area": {
					"type": "panel",
    				"offset": [ "2px", "23px" ],
    				"size": [ "40% - 4px", "100% - 24px" ],
					"anchor_from": "top_left",
    				"anchor_to": "top_left",
					"controls": [
						{
							"scrolling_panel@common.scrolling_panel": {
								"$scrolling_content": "$selector_area_content",
								"$show_background": false,
								"$scroll_size": [ "5px", "100% - 4px" ],
								"$scroll_bar_left_padding_size": [ 2, 0 ]
							}
						}
					]
				}
			},
			{
				"dialog_divider@common.dialog_divider": {
					"size": [ "4px", "100% - 20px" ],
					"offset": [ "40%", "20px" ],
					"visible": "$show_divider",
					"anchor_from": "top_left",
          			"anchor_to": "top_left",
					"layer": 10
				}
			},
      		{
				"content_area": {
					"type": "panel",
					"offset": [ "-2px", "23px" ],
					"size": [ "60% - 8px", "100% - 24px" ],
					"anchor_from": "top_right",
					"anchor_to": "top_right",
					"controls": [
						{
							"scrolling_panel@common.scrolling_panel": {
								"$scrolling_content": "$section_area_content",
								"$show_background": false,
								"$scroll_size": [ "5px", "100% - 4px" ],
								"$scroll_bar_left_padding_size": [ 2, 0 ]
							}
						}
					]
				}
			}
		]
	},

	//Screen type templates

	"vanilla_dialog@spmax_npc_vanilla_screen.main_screen": {
		"$dialog_prefix|default": "NPC_Vanilla",
		"$background_opacity|default": 0.5,
		"bindings": [
			{
				"binding_name": "#dialogtext",
				"binding_type": "global"
			},
			{
				"binding_type": "view",
				"source_property_name": "(#dialogtext - (#dialogtext - $dialog_prefix) > '')",
				"target_property_name": "#visible"
			}
		]
	},

	"bottom_action@spmax_npc_bottom_action.main_screen": {
		"$dialog_prefix|default": "NPC_BottomAction",
		"$background_opacity|default": 0.25,
		"bindings": [
			{
				"binding_name": "#dialogtext",
				"binding_type": "global"
			},
			{
				"binding_type": "view",
				"source_property_name": "(#dialogtext - (#dialogtext - $dialog_prefix) > '')",
				"target_property_name": "#visible"
			}
		]
	},

	"scroll_box@spmax_npc_scroll_box.main_screen": {
		"$dialog_prefix|default": "NPC_ScrollBox",
		"$background_opacity|default": 0.5,
		"bindings": [
			{
				"binding_name": "#dialogtext",
				"binding_type": "global"
			},
			{
				"binding_type": "view",
				"source_property_name": "(#dialogtext - (#dialogtext - $dialog_prefix) > '')",
				"target_property_name": "#visible"
			}
		]
	},

	"fullscreen_page@spmax_npc_fullscreen.main_screen": {
		"$dialog_prefix|default": "NPC_FullScreen",
		"$background_opacity|default": 0.9,
		"bindings": [
			{
				"binding_name": "#dialogtext",
				"binding_type": "global"
			},
			{
				"binding_type": "view",
				"source_property_name": "(#dialogtext - (#dialogtext - $dialog_prefix) > '')",
				"target_property_name": "#visible"
			}
		]
	}
}
